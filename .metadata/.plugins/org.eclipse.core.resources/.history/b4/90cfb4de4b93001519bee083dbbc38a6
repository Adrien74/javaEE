package com.beans;

import java.util.List;

import javax.ejb.Stateless;
import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;

import com.interfaces.EJBInterface;

import model.Colis;

/**
 * Session Bean implementation class EJBBean
 */
@Stateless(mappedName = "EJB")
public class EJBBean implements EJBInterface {

	@PersistenceContext
	EntityManager em;

	/**
	 * @see EJBInterface#HelloWord(String)
	 */
	@Override
	public String HelloWord(String to) {
		// TODO Auto-generated method stub
		return "Hello World " + to + " !";
	}

	@Override
	public List<Colis> getAllColis() {
		// TODO Auto-generated method stub

		return em.createQuery("Select c from Colis c ORDER BY c.idcolis").getResultList();
	}

	@Override
	public void createColis(double poids, String valeur, String origine, String destination) {
		Colis colis = new Colis (destination,origine,poids,valeur);
		em.createQuery("INSERT INTO Colis (`IDCOLIS`, `POIDS`, `VALEUR`, `ORIGINE`, `DESTINATION`) "
				+ "VALUES (NULL, "+poids + "," + valeur + " ," + origine + " , " + destination + ")");
	}

}
